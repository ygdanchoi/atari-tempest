{"version":3,"sources":["webpack:///webpack/bootstrap 3eb065f2ec8699e24349","webpack:///./lib/game.js","webpack:///./lib/game_view.js","webpack:///./lib/atari_tempest.js","webpack:///./lib/util.js","webpack:///./lib/moving_object.js","webpack:///./lib/blaster.js","webpack:///./lib/blaster_bullet.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;AC/CA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,CAAC;;;;;;;;ACZD;;AAEA;AACA;AACA;AACA;AACA,4CAA4C,qBAAqB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;AC3EA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;AClBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;;;;;;ACxCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"./bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3eb065f2ec8699e24349","const Util = require('./util');\r\nconst Blaster = require('./blaster');\r\nconst BlasterBullet = require('./blaster_bullet');\r\n\r\nclass Game {\r\n  constructor() {\r\n    this.tubeQuads = [];\r\n    this.blasters = [];\r\n    this.blasterBullets = [];\r\n  }\r\n\r\n  add(object) {\r\n    if (object instanceof Blaster) {\r\n      this.blasters.push(object);\r\n    } else if (object instanceof BlasterBullet) {\r\n      this.blasterBullets.push(object);\r\n    } else {\r\n      throw 'unexpected object';\r\n    }\r\n  }\r\n\r\n  addBlaster() {\r\n    const blaster = new Blaster({\r\n      xPos: 0,\r\n      tubeQuad: this.tubeQuads[0],\r\n      game: this,\r\n    });\r\n\r\n    this.add(blaster);\r\n\r\n    return blaster;\r\n  }\r\n\r\n  allObjects() {\r\n    return [].concat(this.blasters, this.blasterBullets);\r\n  }\r\n\r\n  draw(context) {\r\n    context.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\r\n    context.fillStyle = '#000000';\r\n    context.fillRect(0, 0, Game.DIM_X, Game.DIM_Y);\r\n    this.defineTubeQuads(Game.TUBE_CIRCLE_OUTER, Game.TUBE_CIRCLE_INNER);\r\n    this.drawTubeQuads(context, Game.BLUE);\r\n    this.allObjects().forEach((object) => {\r\n      object.draw(context);\r\n    });\r\n  }\r\n\r\n  defineTubeQuads(outer, inner) {\r\n    if (this.tubeQuads.length === 0) {\r\n      for (let i = 0; i < outer.length - 1; i++) {\r\n        this.tubeQuads.push([\r\n          outer[i],\r\n          outer[i + 1],\r\n          inner[i + 1],\r\n          inner[i],\r\n        ]);\r\n      }\r\n    }\r\n  }\r\n\r\n  drawTubeQuads(context, color) {\r\n    context.strokeStyle = color;\r\n    for (let i = 0; i < this.tubeQuads.length; i++) {\r\n      const quadrilateral = this.tubeQuads[i];\r\n      context.beginPath();\r\n      context.moveTo(...quadrilateral[0]);\r\n      context.lineTo(...quadrilateral[1]);\r\n      context.lineTo(...quadrilateral[2]);\r\n      context.lineTo(...quadrilateral[3]);\r\n      context.closePath();\r\n      context.stroke();\r\n    }\r\n  }\r\n\r\n  handleMouseMove(context) {\r\n    return (e) => {\r\n      for (let i = 0; i < this.tubeQuads.length; i++) {\r\n        const point = [e.offsetX, e.offsetY];\r\n        const boundary = this.tubeQuads[i];\r\n        if (Util.isInside(point, boundary)) {\r\n          this.blasters[0].xPos = this.xPosInTubeQuad(point, boundary);\r\n          this.blasters[0].tubeQuad = this.tubeQuads[i];\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  xPosInTubeQuad(point, boundary) {\r\n    return Math.floor(Game.NUM_BLASTER_POSITIONS * Util.xFractionInTubeQuad(point, boundary));\r\n  }\r\n\r\n  moveObjects(delta) {\r\n    this.allObjects().forEach((object) => {\r\n      object.move(delta);\r\n    });\r\n  }\r\n\r\n  remove(object) {\r\n    if (object instanceof BlasterBullet) {\r\n      this.blasterBullets.splice(this.blasterBullets.indexOf(object), 1);\r\n    } else {\r\n      throw 'unexpected object';\r\n    }\r\n  }\r\n\r\n  step(delta) {\r\n    this.moveObjects(delta);\r\n  }\r\n\r\n}\r\n\r\nGame.DIM_X = 512;\r\nGame.DIM_Y = 450;\r\nGame.NUM_BLASTER_POSITIONS = 7;\r\nGame.BLUE = '#0000cc';\r\nGame.YELLOW = '#ffff00';\r\nGame.TUBE_CIRCLE_OUTER = [\r\n  [256, 60],\r\n  [316, 73],\r\n  [368, 108],\r\n  [403, 160],\r\n  [416, 221],\r\n  [403, 281],\r\n  [368, 334],\r\n  [315, 368],\r\n  [256, 381],\r\n  [195, 368],\r\n  [143, 334],\r\n  [108, 281],\r\n  [95, 221],\r\n  [108, 160],\r\n  [143, 108],\r\n  [195, 73],\r\n  [256, 60],\r\n];\r\nGame.TUBE_CIRCLE_INNER = [\r\n  [256, 255],\r\n  [264, 257],\r\n  [273, 262],\r\n  [277, 270],\r\n  [280, 279],\r\n  [277, 289],\r\n  [273, 296],\r\n  [264, 301],\r\n  [256, 303],\r\n  [247, 301],\r\n  [238, 296],\r\n  [234, 289],\r\n  [231, 279],\r\n  [234, 270],\r\n  [238, 262],\r\n  [247, 257],\r\n  [256, 255],\r\n];\r\n\r\nmodule.exports = Game;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/game.js\n// module id = 0\n// module chunks = 0","class GameView {\r\n  constructor(game, canvasEl) {\r\n    this.game = game;\r\n    this.context = canvasEl.getContext('2d');\r\n    this.game.draw(this.context);\r\n    this.blaster = this.game.addBlaster();\r\n    this.bindHandlers(canvasEl);\r\n  }\r\n\r\n  bindHandlers(canvasEl) {\r\n    canvasEl.addEventListener('mousemove', this.game.handleMouseMove(this.context));\r\n    canvasEl.addEventListener('mousedown', () => {\r\n      this.blaster.firing = true;\r\n    });\r\n    canvasEl.addEventListener('mouseup', () => {\r\n      this.blaster.firing = false;\r\n    });\r\n    document.addEventListener('keydown', (e) => {\r\n      switch (e.code) {\r\n        case 'Space':\r\n          this.blaster.firing = true;\r\n          break;\r\n      }\r\n    });\r\n    document.addEventListener('keyup', (e) => {\r\n      switch (e.code) {\r\n        case 'Space':\r\n          this.blaster.firing = false;\r\n          break;\r\n      }\r\n    });\r\n  }\r\n\r\n  start() {\r\n    // requestAnimationFrame(this.animate.bind(this));\r\n    setTimeout(this.animate.bind(this), 40);\r\n  }\r\n\r\n  animate(time) {\r\n    this.game.step();\r\n    this.game.draw(this.context);\r\n    // requestAnimationFrame(this.animate.bind(this));\r\n    setTimeout(this.animate.bind(this), 40);\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = GameView;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/game_view.js\n// module id = 1\n// module chunks = 0","const Game = require('./game');\r\nconst GameView = require('./game_view');\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const canvasEl = document.getElementsByTagName('canvas')[0];\r\n  canvasEl.width = Game.DIM_X;\r\n  canvasEl.height = Game.DIM_Y;\r\n\r\n  context = canvasEl.getContext('2d');\r\n\r\n  const game = new Game();\r\n  new GameView(game, canvasEl).start();\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/atari_tempest.js\n// module id = 2\n// module chunks = 0","const Game = require('./game');\r\n\r\nconst Util = {\r\n  isInside(point, boundary) {\r\n    let result = false;\r\n    // http://stackoverflow.com/questions/8721406/how-to-determine-if-a-point-is-inside-a-2d-convex-polygon\r\n    for (let i = 0, j = boundary.length - 1; i < boundary.length; j = i++) {\r\n      if ((boundary[i][1] > point[1]) != (boundary[j][1] > point[1]) &&\r\n      (point[0] < (boundary[j][0] - boundary[i][0]) * (point[1] - boundary[i][1]) / (boundary[j][1] - boundary[i][1]) + boundary[i][0])) {\r\n        result = !result;\r\n      }\r\n    }\r\n    return result;\r\n  },\r\n\r\n  distanceBetweenPoints(point1, point2) {\r\n    const x1 = point1[0];\r\n    const y1 = point1[1];\r\n    const x2 = point2[0];\r\n    const y2 = point2[1];\r\n    return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\r\n  },\r\n\r\n  distanceToLine(point0, point1, point2) {\r\n    const x0 = point0[0];\r\n    const y0 = point0[1];\r\n    const x1 = point1[0];\r\n    const y1 = point1[1];\r\n    const x2 = point2[0];\r\n    const y2 = point2[1];\r\n    const numerator = Math.abs((y2 - y1) * x0 - (x2 - x1) * y0 + x2 * y1 - y2 * x1);\r\n    const denominator = Math.sqrt(Math.pow(y2 - y1, 2) + Math.pow(x2 - x1, 2));\r\n    return numerator / denominator;\r\n  },\r\n\r\n  xFractionInTubeQuad(point, tubeQuad) {\r\n    const distBack = Util.distanceToLine(point, tubeQuad[0], tubeQuad[3]);\r\n    const distForward = Util.distanceToLine(point, tubeQuad[1], tubeQuad[2]);\r\n    const distTotal = distBack + distForward;\r\n    return distBack / distTotal;\r\n  },\r\n\r\n  midpoint(point1, point2) {\r\n    const x1 = point1[0];\r\n    const y1 = point1[1];\r\n    const x2 = point2[0];\r\n    const y2 = point2[1];\r\n    return [(x1 + x2) / 2, (y1 + y2) / 2];\r\n  },\r\n\r\n  vector(point1, point2, scalar) {\r\n    const x1 = point1[0];\r\n    const y1 = point1[1];\r\n    const x2 = point2[0];\r\n    const y2 = point2[1];\r\n    return [(x2 - x1) * scalar, (y2 - y1) * scalar];\r\n  },\r\n\r\n  addVector(point1, point2) {\r\n    const x1 = point1[0];\r\n    const y1 = point1[1];\r\n    const x2 = point2[0];\r\n    const y2 = point2[1];\r\n    return [x1 + x2, y1 + y2];\r\n  },\r\n\r\n  slope(point1, point2) {\r\n    const x1 = point1[0];\r\n    const y1 = point1[1];\r\n    const x2 = point2[0];\r\n    const y2 = point2[1];\r\n    return (y2 - y1) / (x2 - x1);\r\n  },\r\n};\r\n\r\nmodule.exports = Util;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/util.js\n// module id = 4\n// module chunks = 0","// const Util = require('./util');\r\n\r\nclass MovingObject {\r\n  constructor(options) {\r\n    this.game = options.game;\r\n  }\r\n\r\n  draw(context) {\r\n  }\r\n\r\n  move(delta) {\r\n  }\r\n\r\n  remove() {\r\n    this.game.remove(this);\r\n  }\r\n}\r\n\r\nmodule.exports = MovingObject;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/moving_object.js\n// module id = 5\n// module chunks = 0","const MovingObject = require('./moving_object');\r\nconst BlasterBullet = require('./blaster_bullet');\r\nconst Util = require('./util');\r\n\r\nclass Blaster extends MovingObject {\r\n  constructor(options) {\r\n    super(options);\r\n    this.xPos = options.xPos;\r\n    this.tubeQuad = options.tubeQuad;\r\n    this.firing = false;\r\n  }\r\n\r\n  draw(context) {\r\n    this.drawTubeQuad(context, this.tubeQuad);\r\n    if (this.firing) {\r\n      this.fireBullet();\r\n    }\r\n  }\r\n\r\n  drawTubeQuad(context, tubeQuad) {\r\n    context.strokeStyle = '#ffff00';\r\n    context.beginPath();\r\n    context.moveTo(...tubeQuad[1]);\r\n    context.lineTo(...tubeQuad[2]);\r\n    context.moveTo(...tubeQuad[3]);\r\n    context.lineTo(...tubeQuad[0]);\r\n    context.closePath();\r\n    context.stroke();\r\n  }\r\n\r\n  fireBullet() {\r\n    const tubeQuad = this.tubeQuad;\r\n    const blasterBullet = new BlasterBullet({\r\n      game: this.game,\r\n      tubeQuad: this.tubeQuad,\r\n    });\r\n    this.game.add(blasterBullet);\r\n  }\r\n}\r\n\r\nmodule.exports = Blaster;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/blaster.js\n// module id = 6\n// module chunks = 0","const MovingObject = require('./moving_object');\r\nconst Util = require('./util');\r\n\r\nclass BlasterBullet extends MovingObject {\r\n  constructor(options) {\r\n    super(options);\r\n    this.tubeQuad = options.tubeQuad;\r\n    this.zPos = 0;\r\n  }\r\n\r\n  draw(context) {\r\n    context.fillStyle = '#ffffff';\r\n    context.beginPath();\r\n    const posFrom = Util.midpoint(this.tubeQuad[0], this.tubeQuad[1]);\r\n    const posTo = Util.midpoint(this.tubeQuad[2], this.tubeQuad[3]);\r\n    const zFraction = this.zPos / BlasterBullet.MAX_Z_POS;\r\n    const easeFraction = 1 - Math.pow(zFraction - 1, 2);\r\n    const vectorTo = Util.vector(posFrom, posTo, easeFraction);\r\n    const pos = Util.addVector(posFrom, vectorTo);\r\n    context.arc(\r\n      pos[0], pos[1], 3 * (1 - easeFraction) + 1, 0, 2 * Math.PI, true\r\n    );\r\n    context.fill();\r\n  }\r\n\r\n  move(delta) {\r\n    this.zPos += 5;\r\n    if (this.zPos > 120) {\r\n      this.remove();\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = BlasterBullet;\r\n\r\nBlasterBullet.MAX_Z_POS = 120;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/blaster_bullet.js\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}